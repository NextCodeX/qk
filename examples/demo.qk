
host = "http://localhost:8080"


resp = httpPostData(`$host/post6?name=changlie`, {
id: 1024,
age: "female"
})
resp.pr()
assert(resp.json().error == "Bad Request")

demoFileBytes = fbs(`$root/demo.qk`)
resp = httpPostData(`$host/post7?name=chx`, {
id: 1024,
age: "female",
"#annex": demoFileBytes
})
resp.pr()
assert(resp.json().action == "post7")
assert(resp.json().param.name == "chx")
assert(resp.json().type == "multipart/form-data;file")
assert(resp.json().annex.has("file;application"))

resp = httpPostData(`$host/post8?name=chx`, {
id: 1024,
age: "female",
"@files": [`$root/demo.qk`,`$root/http_client.qk`,`$root/type_byte_array.qk`]
})
resp.pr()
assert(resp.json().action == "post8")
assert(resp.json().param.name == "chx")
assert(resp.json().type == "multipart/form-data;multi file")
assert(resp.json().files.size() == 3)

echo("http put request")

